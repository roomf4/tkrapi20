#!/bin/bash

# ~/tkrapi20/demo/demoload_keras_fromdb.bash

# This script should demo a simple function in kerastkr.py named load_predict_keraslinear()

cd ~/tkrapi20/
. env.bash
~/anaconda3/bin/python py/demoload_keras_fromdb.py

exit
exit
exit

# I should see something like this:

dan@tkrapi:~/tkrapi20 $ 
dan@tkrapi:~/tkrapi20 $ 
dan@tkrapi:~/tkrapi20 $ demo/demoload_keras_fromdb.bash
Using TensorFlow backend.
Epoch 1/128
2017-11-16 17:31:59.815489: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, 
but these are available on your machine and could speed up CPU computations.
2017-11-16 17:31:59.815530: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions,
but these are available on your machine and could speed up CPU computations.
2017-11-16 17:31:59.815540: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, 
but these are available on your machine and could speed up CPU computations.
757/757 [==============================] - 0s - loss: 4.1182     
Epoch 2/128
757/757 [==============================] - 0s - loss: 4.0761     
Epoch 3/128
757/757 [==============================] - 0s - loss: 4.0396     
Epoch 4/128
757/757 [==============================] - 0s - loss: 3.9978     
Epoch 5/128
757/757 [==============================] - 0s - loss: 3.9631     
Epoch 6/128
757/757 [==============================] - 0s - loss: 3.9253     
Epoch 7/128
757/757 [==============================] - 0s - loss: 3.8886     
Epoch 8/128
757/757 [==============================] - 0s - loss: 3.8550     
Epoch 9/128
757/757 [==============================] - 0s - loss: 3.8199     
Epoch 10/128
757/757 [==============================] - 0s - loss: 3.7851     
Epoch 11/128
757/757 [==============================] - 0s - loss: 3.7549     
Epoch 12/128
757/757 [==============================] - 0s - loss: 3.7202     
Epoch 13/128
757/757 [==============================] - 0s - loss: 3.6891     
Epoch 14/128
757/757 [==============================] - 0s - loss: 3.6594     
Epoch 15/128
757/757 [==============================] - 0s - loss: 3.6281     
Epoch 16/128
757/757 [==============================] - 0s - loss: 3.6002     
Epoch 17/128
757/757 [==============================] - 0s - loss: 3.5710     
Epoch 18/128
757/757 [==============================] - 0s - loss: 3.5437     
Epoch 19/128
757/757 [==============================] - 0s - loss: 3.5151     
Epoch 20/128
757/757 [==============================] - 0s - loss: 3.4891     
Epoch 21/128
757/757 [==============================] - 0s - loss: 3.4621     
Epoch 22/128
757/757 [==============================] - 0s - loss: 3.4353     
Epoch 23/128
757/757 [==============================] - 0s - loss: 3.4098     
Epoch 24/128
757/757 [==============================] - 0s - loss: 3.3846     
Epoch 25/128
757/757 [==============================] - 0s - loss: 3.3599     
Epoch 26/128
757/757 [==============================] - 0s - loss: 3.3371     
Epoch 27/128
757/757 [==============================] - 0s - loss: 3.3137     
Epoch 28/128
757/757 [==============================] - 0s - loss: 3.2891     
Epoch 29/128
757/757 [==============================] - 0s - loss: 3.2690     
Epoch 30/128
757/757 [==============================] - 0s - loss: 3.2451     
Epoch 31/128
757/757 [==============================] - 0s - loss: 3.2245     
Epoch 32/128
757/757 [==============================] - 0s - loss: 3.2022     
Epoch 33/128
757/757 [==============================] - 0s - loss: 3.1833     
Epoch 34/128
757/757 [==============================] - 0s - loss: 3.1626     
Epoch 35/128
757/757 [==============================] - 0s - loss: 3.1428     
Epoch 36/128
757/757 [==============================] - 0s - loss: 3.1230     
Epoch 37/128
757/757 [==============================] - 0s - loss: 3.1048     
Epoch 38/128
757/757 [==============================] - 0s - loss: 3.0861     
Epoch 39/128
757/757 [==============================] - 0s - loss: 3.0669     
Epoch 40/128
757/757 [==============================] - 0s - loss: 3.0494     
Epoch 41/128
757/757 [==============================] - 0s - loss: 3.0336     
Epoch 42/128
757/757 [==============================] - 0s - loss: 3.0161     
Epoch 43/128
757/757 [==============================] - 0s - loss: 2.9990     
Epoch 44/128
757/757 [==============================] - 0s - loss: 2.9826     
Epoch 45/128
757/757 [==============================] - 0s - loss: 2.9680     
Epoch 46/128
757/757 [==============================] - 0s - loss: 2.9518     
Epoch 47/128
757/757 [==============================] - 0s - loss: 2.9369     
Epoch 48/128
757/757 [==============================] - 0s - loss: 2.9226     
Epoch 49/128
757/757 [==============================] - 0s - loss: 2.9069     
Epoch 50/128
757/757 [==============================] - 0s - loss: 2.8941     
Epoch 51/128
757/757 [==============================] - 0s - loss: 2.8803     
Epoch 52/128
757/757 [==============================] - 0s - loss: 2.8671     
Epoch 53/128
757/757 [==============================] - 0s - loss: 2.8534     
Epoch 54/128
757/757 [==============================] - 0s - loss: 2.8410     
Epoch 55/128
757/757 [==============================] - 0s - loss: 2.8287     
Epoch 56/128
757/757 [==============================] - 0s - loss: 2.8160     
Epoch 57/128
757/757 [==============================] - 0s - loss: 2.8043     
Epoch 58/128
757/757 [==============================] - 0s - loss: 2.7925     
Epoch 59/128
757/757 [==============================] - 0s - loss: 2.7823     
Epoch 60/128
757/757 [==============================] - 0s - loss: 2.7710     
Epoch 61/128
757/757 [==============================] - 0s - loss: 2.7603     
Epoch 62/128
757/757 [==============================] - 0s - loss: 2.7490     
Epoch 63/128
757/757 [==============================] - 0s - loss: 2.7393     
Epoch 64/128
757/757 [==============================] - 0s - loss: 2.7295     
Epoch 65/128
757/757 [==============================] - 0s - loss: 2.7203     
Epoch 66/128
757/757 [==============================] - 0s - loss: 2.7104     
Epoch 67/128
757/757 [==============================] - 0s - loss: 2.7018     
Epoch 68/128
757/757 [==============================] - 0s - loss: 2.6933     
Epoch 69/128
757/757 [==============================] - 0s - loss: 2.6843     
Epoch 70/128
757/757 [==============================] - 0s - loss: 2.6761     
Epoch 71/128
757/757 [==============================] - 0s - loss: 2.6677     
Epoch 72/128
757/757 [==============================] - 0s - loss: 2.6598     
Epoch 73/128
757/757 [==============================] - 0s - loss: 2.6530     
Epoch 74/128
757/757 [==============================] - 0s - loss: 2.6454     
Epoch 75/128
757/757 [==============================] - 0s - loss: 2.6382     
Epoch 76/128
757/757 [==============================] - 0s - loss: 2.6305     
Epoch 77/128
757/757 [==============================] - 0s - loss: 2.6247     
Epoch 78/128
757/757 [==============================] - 0s - loss: 2.6176     
Epoch 79/128
757/757 [==============================] - 0s - loss: 2.6114     
Epoch 80/128
757/757 [==============================] - 0s - loss: 2.6051     
Epoch 81/128
757/757 [==============================] - 0s - loss: 2.5991     
Epoch 82/128
757/757 [==============================] - 0s - loss: 2.5935     
Epoch 83/128
757/757 [==============================] - 0s - loss: 2.5883     
Epoch 84/128
757/757 [==============================] - 0s - loss: 2.5829     
Epoch 85/128
757/757 [==============================] - 0s - loss: 2.5774     
Epoch 86/128
757/757 [==============================] - 0s - loss: 2.5725     
Epoch 87/128
757/757 [==============================] - 0s - loss: 2.5682     
Epoch 88/128
757/757 [==============================] - 0s - loss: 2.5630     
Epoch 89/128
757/757 [==============================] - 0s - loss: 2.5583     
Epoch 90/128
757/757 [==============================] - 0s - loss: 2.5538     
Epoch 91/128
757/757 [==============================] - 0s - loss: 2.5499     
Epoch 92/128
757/757 [==============================] - 0s - loss: 2.5459     
Epoch 93/128
757/757 [==============================] - 0s - loss: 2.5423     
Epoch 94/128
757/757 [==============================] - 0s - loss: 2.5380     
Epoch 95/128
757/757 [==============================] - 0s - loss: 2.5348     
Epoch 96/128
757/757 [==============================] - 0s - loss: 2.5312     
Epoch 97/128
757/757 [==============================] - 0s - loss: 2.5278     
Epoch 98/128
757/757 [==============================] - 0s - loss: 2.5244     
Epoch 99/128
757/757 [==============================] - 0s - loss: 2.5214     
Epoch 100/128
757/757 [==============================] - 0s - loss: 2.5183     
Epoch 101/128
757/757 [==============================] - 0s - loss: 2.5154     
Epoch 102/128
757/757 [==============================] - 0s - loss: 2.5129     
Epoch 103/128
757/757 [==============================] - 0s - loss: 2.5102     
Epoch 104/128
757/757 [==============================] - 0s - loss: 2.5075     
Epoch 105/128
757/757 [==============================] - 0s - loss: 2.5050     
Epoch 106/128
757/757 [==============================] - 0s - loss: 2.5027     
Epoch 107/128
757/757 [==============================] - 0s - loss: 2.5006     
Epoch 108/128
757/757 [==============================] - 0s - loss: 2.4983     
Epoch 109/128
757/757 [==============================] - 0s - loss: 2.4964     
Epoch 110/128
757/757 [==============================] - 0s - loss: 2.4941     
Epoch 111/128
757/757 [==============================] - 0s - loss: 2.4927     
Epoch 112/128
757/757 [==============================] - 0s - loss: 2.4907     
Epoch 113/128
757/757 [==============================] - 0s - loss: 2.4888     
Epoch 114/128
757/757 [==============================] - 0s - loss: 2.4872     
Epoch 115/128
757/757 [==============================] - 0s - loss: 2.4856     
Epoch 116/128
757/757 [==============================] - 0s - loss: 2.4841     
Epoch 117/128
757/757 [==============================] - 0s - loss: 2.4827     
Epoch 118/128
757/757 [==============================] - 0s - loss: 2.4813     
Epoch 119/128
757/757 [==============================] - 0s - loss: 2.4796     
Epoch 120/128
757/757 [==============================] - 0s - loss: 2.4788     
Epoch 121/128
757/757 [==============================] - 0s - loss: 2.4772     
Epoch 122/128
757/757 [==============================] - 0s - loss: 2.4760     
Epoch 123/128
757/757 [==============================] - 0s - loss: 2.4750     
Epoch 124/128
757/757 [==============================] - 0s - loss: 2.4738     
Epoch 125/128
757/757 [==============================] - 0s - loss: 2.4733     
Epoch 126/128
757/757 [==============================] - 0s - loss: 2.4720     
Epoch 127/128
757/757 [==============================] - 0s - loss: 2.4712     
Epoch 128/128
757/757 [==============================] - 0s - loss: 2.4703     
           cdate      cp  pct_lead  prediction  effectiveness  accuracy
1308  2017-08-01  169.86    -0.330      -0.018          0.330       1.0
1309  2017-08-02  169.30    -0.419       0.118         -0.419       0.0
1310  2017-08-03  168.59     0.611       0.237          0.611       1.0
1311  2017-08-04  169.62     1.391       0.220          1.391       1.0
1312  2017-08-07  171.98    -0.436       0.279         -0.436       0.0
1313  2017-08-08  171.23    -0.029      -0.052          0.029       1.0
1314  2017-08-09  171.18    -2.208      -0.009          2.208       1.0
1315  2017-08-10  167.40     0.406      -0.179         -0.406       0.0
1316  2017-08-11  168.08     1.589       0.392          1.589       1.0
1317  2017-08-14  170.75     0.146       0.444          0.146       1.0
1318  2017-08-15  171.00    -0.585       0.160         -0.585       0.0
1319  2017-08-16  170.00    -1.818      -0.113          1.818       1.0
1320  2017-08-17  166.91     0.300      -0.158         -0.300       0.0
1321  2017-08-18  167.41     0.221       0.346          0.221       1.0
1322  2017-08-21  167.78     1.109       0.326          1.109       1.0
1323  2017-08-22  169.64    -0.548       0.349         -0.548       0.0
1324  2017-08-23  168.71    -0.575      -0.068          0.575       1.0
1325  2017-08-24  167.74    -0.847       0.000          0.000       0.5
1326  2017-08-25  166.32     0.553       0.038          0.553       1.0
1327  2017-08-28  167.24     0.484       0.347          0.484       1.0
1328  2017-08-29  168.05     1.113       0.247          1.113       1.0
1329  2017-08-30  169.92     1.206       0.223          1.206       1.0
1330  2017-08-31  171.97     0.029       0.070          0.029       1.0
dan@tkrapi:~/tkrapi20 $ 
dan@tkrapi:~/tkrapi20 $ 

